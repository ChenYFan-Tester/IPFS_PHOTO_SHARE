<!doctype html>
<html lang="zh" class="no-js">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>IPFS PHOTO SHARE</title>
	<link href='https://fonts.geekzu.org/css?family=Source+Sans+Pro:400,300,700,400italic' rel='stylesheet'
		type='text/css'>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ChenYFan-Tester/ipfscloud/css/style.css">
	<style>
		.grecaptcha-badge {
			display: none !important;
		}
	</style>
	<script src="https://cdn.jsdelivr.net/gh/ChenYFan-Tester/ipfscloud/js/modernizr.js"></script> <!-- Modernizr -->
</head>

<body>
	<div style=" 
	position:fixed;
  top: 0;
  left: 0;
  width:100%;
  height:100%;
  min-width: 1000px;
  z-index:-10;
  zoom: 1;
  background-color: #fff;
  background-repeat: no-repeat;
  background-size: cover;
  -webkit-background-size: cover;
  -o-background-size: cover;
  background-position: center 0;
  background-image: url(https://cdn.jsdelivr.net/npm/chenyfan-acg-bg@0.0.9/22.jpg);"></div>
	<div class="cd-intro-block">
		<div class="content-wrapper">
			<div class="htmleaf-header">
				<h1>IPFS PHOTO SHARE <span>最大100MB · 无限制 · 开放 · 共享的图片分享</span></h1>
				<a class='cd-btn' href="javascript:document.getElementById('file').click();">上传文件</a>
				<input type="file" id="file" style="display:none">
			</div>
			<a class='cd-btn' href="javascript:void(0)" data-action="show-projects">查看分享</a>
		</div>
	</div>

	<div class="cd-projects-wrapper">
		<ul class="cd-slider">


		</ul>
		<ul class="cd-slider-navigation cd-img-replace">
			<li><a href="#0" class="prev inactive">上一个</a></li>
			<li><a href="#0" class="next">下一个</a></li>
		</ul>
	</div> <!-- .cd-projects-wrapper -->
	<script src="https://recaptcha.net/recaptcha/api.js?render=6Lc6tp8aAAAAAO7y-YkhZQ3eYYt8FZnBi873CTGD"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery@2.1.1"></script>
	<script src="https://cdn.jsdelivr.net/gh/ChenYFan-Tester/ipfscloud/js/jquery.mobile.custom.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/ChenYFan-Tester/ipfscloud/js/main.js"></script>
	<script>
		window.replaceimg = (id, url) => {
			document.getElementById(id).src = url
		};
		document.getElementById('file').addEventListener('change', async () => {

			try { swal.close() } catch (p) { }
			swal({ title: "\n人机验证中...", icon: "https://cdn.jsdelivr.net/gh/HexoPlusPlus/CDN@db63c79/loading.gif", text: "\n", button: false, closeModal: false, });

			grecaptcha.ready(() => {
				grecaptcha.execute('6Lc6tp8aAAAAAO7y-YkhZQ3eYYt8FZnBi873CTGD', { action: 'ipfs_photo' }).then(async (token) => {


					try { swal.close() } catch (p) { }
					swal({ title: "\n上传中...", icon: "https://cdn.jsdelivr.net/gh/HexoPlusPlus/CDN@db63c79/loading.gif", text: "\n", button: false, closeModal: false, });
					var formdata = new FormData();
					formdata.append("file", document.getElementById("file").files[0]);
					const p = await (await fetch(`/upload?token=${token}`, { method: 'POST', body: formdata })).json()
					if (p.ctx.success) {
						try { swal.close() } catch (p) { }
						swal("成功！", "你的文件已上传，刷新即可在分享区查看您上传的图片", "success");
					} else {
						try { swal.close() } catch (p) { }
						swal("失败！！", p.msg, "error");
					}

				});
			});
		})
	</script>
</body>

</html>